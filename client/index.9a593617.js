import{S as e,i as s,s as a,e as t,t as r,c as n,a as o,b as i,d as c,f as l,g as d,h as u,j as h,k as f,l as p,m,n as g,o as $,p as v,q as w,r as P,u as I,v as j,w as x}from"./client.3470d3c5.js";import{s as y,B as b}from"./Block.c77e4aa5.js";import"./v4.96b22442.js";import"./index.be6c168a.js";function E(e){let s,a,h;return{c(){s=t("a"),a=r("Edit this page"),this.h()},l(e){s=n(e,"A",{class:!0,href:!0});var t=o(s);a=i(t,"Edit this page"),t.forEach(c),this.h()},h(){l(s,"class","edit-btn svelte-106zl87"),l(s,"href",h=`/${e[1]}/${e[2]}/edit`)},m(e,t){d(e,s,t),u(s,a)},p(e,a){6&a&&h!==(h=`/${e[1]}/${e[2]}/edit`)&&l(s,"href",h)},d(e){e&&c(s)}}}function k(e){let s,a,r,i,I;r=new b({});let j=e[1]===e[0]&&E(e);return{c(){s=t("main"),a=t("div"),h(r.$$.fragment),i=f(),j&&j.c(),this.h()},l(e){s=n(e,"MAIN",{class:!0});var t=o(s);a=n(t,"DIV",{class:!0});var l=o(a);p(r.$$.fragment,l),l.forEach(c),i=m(t),j&&j.l(t),t.forEach(c),this.h()},h(){l(a,"class","block svelte-106zl87"),l(s,"class","svelte-106zl87"),g(s,"hidden",e[3])},m(e,t){d(e,s,t),u(s,a),$(r,a,null),u(s,i),j&&j.m(s,null),I=!0},p(e,[a]){e[1]===e[0]?j?j.p(e,a):(j=E(e),j.c(),j.m(s,null)):j&&(j.d(1),j=null),8&a&&g(s,"hidden",e[3])},i(e){I||(v(r.$$.fragment,e),I=!0)},o(e){w(r.$$.fragment,e),I=!1},d(e){e&&c(s),P(r),j&&j.d()}}}var z=function(e,s,a,t){return new(a||(a=Promise))((function(r,n){function o(e){try{c(t.next(e))}catch(e){n(e)}}function i(e){try{c(t.throw(e))}catch(e){n(e)}}function c(e){var s;e.done?r(e.value):(s=e.value,s instanceof a?s:new a((function(e){e(s)}))).then(o,i)}c((t=t.apply(e,s||[])).next())}))};function B(e,s){return z(this,void 0,void 0,(function*(){try{const{username:a,pageId:t}=e.params,r=`api/${a}/${t}.json`,n=yield this.fetch(r),o=yield n.json();return o||this.error(404,"Page does not exist"),o.pageProps.editingLayout=!1,o.pageProps.focusedBlock="",y.set(o),{storePreloaded:o,pageId:t,owner:a,create:!1,username:s.username}}catch(e){this.error(500,e)}}))}function A(e,s,a){let t;I(e,y,e=>a(5,t=e));let{storePreloaded:r}=s,{owner:n}=s,{username:o}=s,{pageId:i}=s,c=!0;return r&&j(y,t=r,t),x(()=>a(3,c=!1)),e.$$set=e=>{"storePreloaded"in e&&a(4,r=e.storePreloaded),"owner"in e&&a(0,n=e.owner),"username"in e&&a(1,o=e.username),"pageId"in e&&a(2,i=e.pageId)},[n,o,i,c,r]}export default class extends e{constructor(e){super(),s(this,e,A,k,a,{storePreloaded:4,owner:0,username:1,pageId:2})}}export{B as preload};
