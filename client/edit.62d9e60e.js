import{S as e,i as t,s as a,e as s,c as o,a as l,d as n,b as r,f as c,n as i,t as d,g as u,h,j as f,k as p,l as g,m,z as v,o as $,G as b,p as k,q as E,r as P,M as x,v as I,w as T,x as y,H as w,u as B,L as N,I as U,B as L,K as D,N as S,O,A,P as V,C as j,D as H}from"./client.d26e5301.js";import{u as M,b as q,c as R,g as z,d as C,s as F}from"./index.ea2af0eb.js";import"./v4.96b22442.js";import{s as W,a as G,d as K,b as J,c as Q,e as X,f as Y,g as Z,h as _,i as ee,j as te,k as ae,l as se,m as oe,t as le,n as ne,o as re,p as ce,B as ie,q as de}from"./Block.ffd055ef.js";function ue(e){let t,a,i,$,b,k,E,P,x,I,T;return{c(){t=s("span"),a=d(e[0]),i=u(),$=s("div"),b=s("button"),k=d("Edit"),E=u(),P=s("button"),x=d("Delete"),this.h()},l(s){t=o(s,"SPAN",{});var r=l(t);a=h(r,e[0]),r.forEach(n),i=f(s),$=o(s,"DIV",{class:!0});var c=l($);b=o(c,"BUTTON",{class:!0});var d=l(b);k=h(d,"Edit"),d.forEach(n),E=f(c),P=o(c,"BUTTON",{class:!0});var u=l(P);x=h(u,"Delete"),u.forEach(n),c.forEach(n),this.h()},h(){r(b,"class","svelte-1x1bio2"),r(P,"class","svelte-1x1bio2"),r($,"class","button-container")},m(s,o){c(s,t,o),p(t,a),c(s,i,o),c(s,$,o),p($,b),p(b,k),p($,E),p($,P),p(P,x),I||(T=[g(b,"click",e[9]),g(P,"click",e[10])],I=!0)},p(e,t){1&t&&m(a,e[0])},d(e){e&&n(t),e&&n(i),e&&n($),I=!1,v(T)}}}function he(e){let t,a,i,m,b,k,E,P,x,I,T,y,w,B,N,U,L,D,S;return{c(){t=s("div"),a=s("label"),i=d("Name"),b=u(),k=s("input"),P=u(),x=s("label"),I=d("Link"),y=u(),w=s("input"),N=u(),U=s("button"),L=d("Done"),this.h()},l(e){t=o(e,"DIV",{class:!0});var s=l(t);a=o(s,"LABEL",{for:!0});var r=l(a);i=h(r,"Name"),r.forEach(n),b=f(s),k=o(s,"INPUT",{id:!0,class:!0}),P=f(s),x=o(s,"LABEL",{for:!0});var c=l(x);I=h(c,"Link"),c.forEach(n),y=f(s),w=o(s,"INPUT",{id:!0,class:!0}),N=f(s),U=o(s,"BUTTON",{class:!0});var d=l(U);L=h(d,"Done"),d.forEach(n),s.forEach(n),this.h()},h(){r(a,"for",m="item-text-"+e[2]),r(k,"id",E="item-text-"+e[2]),r(k,"class","svelte-1x1bio2"),r(x,"for",T="item-href-"+e[2]),r(w,"id",B="item-href-"+e[2]),r(w,"class","svelte-1x1bio2"),r(U,"class","svelte-1x1bio2"),r(t,"class","edit-panel svelte-1x1bio2")},m(s,o){c(s,t,o),p(t,a),p(a,i),p(t,b),p(t,k),$(k,e[0]),p(t,P),p(t,x),p(x,I),p(t,y),p(t,w),$(w,e[1]),p(t,N),p(t,U),p(U,L),D||(S=[g(k,"input",e[6]),g(w,"input",e[7]),g(U,"click",e[8])],D=!0)},p(e,t){4&t&&m!==(m="item-text-"+e[2])&&r(a,"for",m),4&t&&E!==(E="item-text-"+e[2])&&r(k,"id",E),1&t&&k.value!==e[0]&&$(k,e[0]),4&t&&T!==(T="item-href-"+e[2])&&r(x,"for",T),4&t&&B!==(B="item-href-"+e[2])&&r(w,"id",B),2&t&&w.value!==e[1]&&$(w,e[1])},d(e){e&&n(t),D=!1,v(S)}}}function fe(e){let t;function a(e,t){return e[5]?he:ue}let d=a(e),u=d(e);return{c(){t=s("div"),u.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var a=l(t);u.l(a),a.forEach(n),this.h()},h(){r(t,"class","item-container svelte-1x1bio2")},m(e,a){c(e,t,a),u.m(t,null)},p(e,[s]){d===(d=a(e))&&u?u.p(e,s):(u.d(1),u=d(e),u&&(u.c(),u.m(t,null)))},i:i,o:i,d(e){e&&n(t),u.d()}}}function pe(e,t,a){let s=!1,{text:o}=t,{href:l}=t,{index:n}=t,{handleDelete:r}=t,{handleUpdate:c}=t;return e.$$set=e=>{"text"in e&&a(0,o=e.text),"href"in e&&a(1,l=e.href),"index"in e&&a(2,n=e.index),"handleDelete"in e&&a(3,r=e.handleDelete),"handleUpdate"in e&&a(4,c=e.handleUpdate)},[o,l,n,r,c,s,function(){o=this.value,a(0,o)},function(){l=this.value,a(1,l)},()=>{a(5,s=!1),c()},()=>a(5,s=!0),()=>r(n)]}class ge extends e{constructor(e){super(),t(this,e,pe,fe,a,{text:0,href:1,index:2,handleDelete:3,handleUpdate:4})}}function me(e,t,a){const s=e.slice();return s[15]=t[a],s[16]=t,s[17]=a,s}function ve(e,t){let a,s,o,l,r;function i(e){t[9].call(null,e,t[15])}function d(e){t[10].call(null,e,t[15])}let u={handleUpdate:t[3],handleDelete:t[5],index:t[17]};return void 0!==t[15].text&&(u.text=t[15].text),void 0!==t[15].href&&(u.href=t[15].href),s=new ge({props:u}),D.push(()=>S(s,"text",i)),D.push(()=>S(s,"href",d)),{key:e,first:null,c(){a=b(),k(s.$$.fragment),this.h()},l(e){a=b(),E(s.$$.fragment,e),this.h()},h(){this.first=a},m(e,t){c(e,a,t),P(s,e,t),r=!0},p(e,a){t=e;const n={};1&a&&(n.index=t[17]),!o&&1&a&&(o=!0,n.text=t[15].text,x(()=>o=!1)),!l&&1&a&&(l=!0,n.href=t[15].href,x(()=>l=!1)),s.$set(n)},i(e){r||(I(s.$$.fragment,e),r=!0)},o(e){T(s.$$.fragment,e),r=!1},d(e){e&&n(a),y(s,e)}}}function $e(e){let t,a,i,m,b,k,E,P,x,y,L,D,S,O,A,V,j,H,M,q,R,z,C,F,W,G,K,J,Q=[],X=new Map,Y=e[0];const Z=e=>e[17];for(let t=0;t<Y.length;t+=1){let a=me(e,Y,t),s=Z(a);X.set(s,Q[t]=ve(s,a))}return{c(){t=s("p"),a=d("Logo"),i=u(),m=s("label"),b=d("Name"),k=u(),E=s("input"),P=u(),x=s("label"),y=d("Link"),L=u(),D=s("input"),S=u(),O=s("div"),A=s("label"),V=d("Image"),j=u(),H=s("input"),M=u(),q=s("p"),R=d("Links"),z=u();for(let e=0;e<Q.length;e+=1)Q[e].c();C=u(),F=s("button"),W=d("Add"),this.h()},l(e){t=o(e,"P",{});var s=l(t);a=h(s,"Logo"),s.forEach(n),i=f(e),m=o(e,"LABEL",{for:!0});var r=l(m);b=h(r,"Name"),r.forEach(n),k=f(e),E=o(e,"INPUT",{id:!0,type:!0}),P=f(e),x=o(e,"LABEL",{for:!0});var c=l(x);y=h(c,"Link"),c.forEach(n),L=f(e),D=o(e,"INPUT",{id:!0,type:!0}),S=f(e),O=o(e,"DIV",{class:!0});var d=l(O);A=o(d,"LABEL",{for:!0});var u=l(A);V=h(u,"Image"),u.forEach(n),j=f(d),H=o(d,"INPUT",{id:!0,type:!0,class:!0}),d.forEach(n),M=f(e),q=o(e,"P",{});var p=l(q);R=h(p,"Links"),p.forEach(n),z=f(e);for(let t=0;t<Q.length;t+=1)Q[t].l(e);C=f(e),F=o(e,"BUTTON",{});var g=l(F);W=h(g,"Add"),g.forEach(n),this.h()},h(){r(m,"for","logo-name-input"),r(E,"id","logo-name-input"),r(E,"type","text"),r(x,"for","logo-href"),r(D,"id","logo-href"),r(D,"type","text"),r(A,"for","logo-image-upload"),r(H,"id","logo-image-upload"),r(H,"type","file"),r(H,"class","svelte-1ss6k92"),r(O,"class","logo-image-upload-container")},m(s,o){c(s,t,o),p(t,a),c(s,i,o),c(s,m,o),p(m,b),c(s,k,o),c(s,E,o),$(E,e[1]),c(s,P,o),c(s,x,o),p(x,y),c(s,L,o),c(s,D,o),$(D,e[2]),c(s,S,o),c(s,O,o),p(O,A),p(A,V),p(O,j),p(O,H),c(s,M,o),c(s,q,o),p(q,R),c(s,z,o);for(let e=0;e<Q.length;e+=1)Q[e].m(s,o);c(s,C,o),c(s,F,o),p(F,W),G=!0,K||(J=[g(E,"input",e[7]),g(E,"keyup",e[3]),g(D,"input",e[8]),g(D,"keyup",e[3]),g(F,"click",e[11])],K=!0)},p(e,[t]){if(2&t&&E.value!==e[1]&&$(E,e[1]),4&t&&D.value!==e[2]&&$(D,e[2]),41&t){const a=e[0];w(),Q=B(Q,t,Z,1,e,a,X,C.parentNode,N,ve,C,me),U()}},i(e){if(!G){for(let e=0;e<Y.length;e+=1)I(Q[e]);G=!0}},o(e){for(let e=0;e<Q.length;e+=1)T(Q[e]);G=!1},d(e){e&&n(t),e&&n(i),e&&n(m),e&&n(k),e&&n(E),e&&n(P),e&&n(x),e&&n(L),e&&n(D),e&&n(S),e&&n(O),e&&n(M),e&&n(q),e&&n(z);for(let t=0;t<Q.length;t+=1)Q[t].d(e);e&&n(C),e&&n(F),K=!1,v(J)}}}function be(e,t,a){let s;L(e,W,e=>a(13,s=e));let o,{elementId:l}=t,n=G(s,l),r=n?n.name:"",c=n?n.href:"";const i=()=>{K(J({elementId:l,menuData:o,logoData:n}))},d=()=>{a(0,o=[...o,{text:"New Item",href:""}]),i()};return e.$$set=e=>{"elementId"in e&&a(6,l=e.elementId)},e.$$.update=()=>{8256&e.$$.dirty&&a(0,o=s.elementProps[l].menuData||[])},[o,r,c,()=>{n=Object.assign(Object.assign({},n),{name:r,href:c}),i()},d,e=>{a(0,o=o.filter((t,a)=>a!==e)),i()},l,function(){r=this.value,a(1,r)},function(){c=this.value,a(2,c)},function(e,t){t.text=e,a(0,o),a(13,s),a(6,l)},function(e,t){t.href=e,a(0,o),a(13,s),a(6,l)},()=>d()]}class ke extends e{constructor(e){super(),t(this,e,be,$e,a,{elementId:6})}}function Ee(e){let t,a,r,u;return{c(){t=s("button"),a=d("Select Parent")},l(e){t=o(e,"BUTTON",{});var s=l(t);a=h(s,"Select Parent"),s.forEach(n)},m(s,o){c(s,t,o),p(t,a),r||(u=g(t,"click",e[2]),r=!0)},p:i,i:i,o:i,d(e){e&&n(t),r=!1,u()}}}function Pe(e,t,a){let s;L(e,W,e=>a(0,s=e));const o=e=>{let t=Q(e),a=X({store:e,blockId:t})||Y({store:e,blockId:t});K(Z({id:a}))};return[s,o,()=>o(s)]}class xe extends e{constructor(e){super(),t(this,e,Pe,Ee,a,{})}}function Ie(e){let t,a,i,b,x,w,B,N,U,L,D,S,O,A,V,j,H,M,q,R,z,C,F,W,G,K,J,Q,X,Y,Z,ee=_(e[2])?"Split Vertically":"Split Horizontally";return b=new xe({}),{c(){t=s("h3"),a=d("Block Settings"),i=u(),k(b.$$.fragment),x=u(),w=s("button"),B=d(ee),N=u(),U=s("button"),L=d("Delete Block"),D=u(),S=s("div"),O=s("label"),A=d("Background Image"),V=u(),j=s("input"),H=u(),M=s("label"),q=d("Background Color"),R=u(),z=s("div"),C=s("input"),F=u(),W=s("button"),G=d("Set"),K=u(),J=s("button"),Q=d("Reset Background"),this.h()},l(e){t=o(e,"H3",{});var s=l(t);a=h(s,"Block Settings"),s.forEach(n),i=f(e),E(b.$$.fragment,e),x=f(e),w=o(e,"BUTTON",{});var r=l(w);B=h(r,ee),r.forEach(n),N=f(e),U=o(e,"BUTTON",{});var c=l(U);L=h(c,"Delete Block"),c.forEach(n),D=f(e),S=o(e,"DIV",{class:!0});var d=l(S);O=o(d,"LABEL",{for:!0,class:!0});var u=l(O);A=h(u,"Background Image"),u.forEach(n),V=f(d),j=o(d,"INPUT",{type:!0,id:!0,class:!0}),H=f(d),M=o(d,"LABEL",{for:!0,class:!0});var p=l(M);q=h(p,"Background Color"),p.forEach(n),R=f(d),z=o(d,"DIV",{class:!0});var g=l(z);C=o(g,"INPUT",{id:!0,type:!0,class:!0}),F=f(g),W=o(g,"BUTTON",{class:!0});var m=l(W);G=h(m,"Set"),m.forEach(n),g.forEach(n),d.forEach(n),K=f(e),J=o(e,"BUTTON",{class:!0});var v=l(J);Q=h(v,"Reset Background"),v.forEach(n),this.h()},h(){r(O,"for","background-image-upload"),r(O,"class","svelte-5hiwhc"),r(j,"type","file"),r(j,"id","background-image-upload"),r(j,"class","svelte-5hiwhc"),r(M,"for","background-color-picker"),r(M,"class","svelte-5hiwhc"),r(C,"id","background-color-picker"),r(C,"type","color"),r(C,"class","svelte-5hiwhc"),r(W,"class","color-picker-btn svelte-5hiwhc"),r(z,"class","color-setting-container svelte-5hiwhc"),r(S,"class","input-container"),r(J,"class","reset-background svelte-5hiwhc")},m(s,o){c(s,t,o),p(t,a),c(s,i,o),P(b,s,o),c(s,x,o),c(s,w,o),p(w,B),c(s,N,o),c(s,U,o),p(U,L),c(s,D,o),c(s,S,o),p(S,O),p(O,A),p(S,V),p(S,j),e[10](j),p(S,H),p(S,M),p(M,q),p(S,R),p(S,z),p(z,C),$(C,e[1]),p(z,F),p(z,W),p(W,G),c(s,K,o),c(s,J,o),p(J,Q),X=!0,Y||(Z=[g(w,"click",e[8]),g(U,"click",e[9]),g(j,"change",e[5]),g(C,"input",e[11]),g(W,"click",e[7]),g(J,"click",e[6])],Y=!0)},p(e,[t]){(!X||4&t)&&ee!==(ee=_(e[2])?"Split Vertically":"Split Horizontally")&&m(B,ee),2&t&&$(C,e[1])},i(e){X||(I(b.$$.fragment,e),X=!0)},o(e){T(b.$$.fragment,e),X=!1},d(a){a&&n(t),a&&n(i),y(b,a),a&&n(x),a&&n(w),a&&n(N),a&&n(U),a&&n(D),a&&n(S),e[10](null),a&&n(K),a&&n(J),Y=!1,v(Z)}}}function Te(e,t,a){let s,o,l;L(e,W,e=>a(2,s=e));let n="#000000";const r=()=>{ee(l,s)},c=()=>{te(l)};return e.$$.update=()=>{4&e.$$.dirty&&(l=Q(s))},[o,n,s,r,c,()=>{if(o.files&&o.files[0]){let e=URL.createObjectURL(o.files[0]);console.log("tempUrl",e),K(ae({blockId:l,url:e,reload:!0})),console.log("blockProps",s.blockProps[l]),M({file:o.files[0]}).then(e=>{K(ae({blockId:l,url:e.data.data.url}))}).catch(()=>console.log("handleUpload: failed to upload to host"))}},()=>{K(ae({blockId:l,reload:!0})),K(se({blockId:l,color:""}))},()=>{K(se({blockId:l,color:n}))},()=>r(),()=>c(),function(e){D[e?"unshift":"push"](()=>{o=e,a(0,o)})},function(){n=this.value,a(1,n)}]}class ye extends e{constructor(e){super(),t(this,e,Te,Ie,a,{})}}function we(e){let t,a,i,$,b,k,E,P,x,y,w,B,N,U,L,D,S,j,H,M,q,R,z="Status: "+(e[0].saved?"Saved":"Modified"),C=e[0].pageProps.editingLayout?"Preview Page":"Edit Page",F=e[0].published?"Unpublish Page":"Publish Page",W=e[0].pageProps.editingLayout?"Preview":"Edit";const G=e[5].default,K=O(G,e,e[4],null);return{c(){t=s("div"),a=s("div"),i=d(z),$=u(),b=s("button"),k=d("x"),E=u(),P=s("button"),x=d(C),y=u(),w=s("button"),B=d(F),N=u(),K&&K.c(),U=u(),L=s("button"),D=d("Show Toolbar"),S=u(),j=s("button"),H=d(W),this.h()},l(e){t=o(e,"DIV",{id:!0,class:!0});var s=l(t);a=o(s,"DIV",{class:!0});var r=l(a);i=h(r,z),r.forEach(n),$=f(s),b=o(s,"BUTTON",{class:!0});var c=l(b);k=h(c,"x"),c.forEach(n),E=f(s),P=o(s,"BUTTON",{class:!0});var d=l(P);x=h(d,C),d.forEach(n),y=f(s),w=o(s,"BUTTON",{class:!0});var u=l(w);B=h(u,F),u.forEach(n),N=f(s),K&&K.l(s),s.forEach(n),U=f(e),L=o(e,"BUTTON",{class:!0});var p=l(L);D=h(p,"Show Toolbar"),p.forEach(n),S=f(e),j=o(e,"BUTTON",{class:!0});var g=l(j);H=h(g,W),g.forEach(n),this.h()},h(){r(a,"class","status svelte-1taoa0b"),r(b,"class","close-toolbar-btn svelte-1taoa0b"),r(P,"class","svelte-1taoa0b"),r(w,"class","svelte-1taoa0b"),r(t,"id","toolbar"),r(t,"class","svelte-1taoa0b"),A(t,"hidden",!e[0].pageProps.showToolbar),r(L,"class","toolbar-toggle svelte-1taoa0b"),A(L,"hidden",oe(e[0])),r(j,"class","preview-btn svelte-1taoa0b"),A(j,"hidden",oe(e[0]))},m(s,o){c(s,t,o),p(t,a),p(a,i),p(t,$),p(t,b),p(b,k),p(t,E),p(t,P),p(P,x),p(t,y),p(t,w),p(w,B),p(t,N),K&&K.m(t,null),c(s,U,o),c(s,L,o),p(L,D),c(s,S,o),c(s,j,o),p(j,H),M=!0,q||(R=[g(b,"click",e[2]),g(P,"click",e[1]),g(w,"click",e[3]),g(L,"click",e[2]),g(j,"click",e[1])],q=!0)},p(e,[a]){(!M||1&a)&&z!==(z="Status: "+(e[0].saved?"Saved":"Modified"))&&m(i,z),(!M||1&a)&&C!==(C=e[0].pageProps.editingLayout?"Preview Page":"Edit Page")&&m(x,C),(!M||1&a)&&F!==(F=e[0].published?"Unpublish Page":"Publish Page")&&m(B,F),K&&K.p&&16&a&&V(K,G,e,e[4],a,null,null),1&a&&A(t,"hidden",!e[0].pageProps.showToolbar),1&a&&A(L,"hidden",oe(e[0])),(!M||1&a)&&W!==(W=e[0].pageProps.editingLayout?"Preview":"Edit")&&m(H,W),1&a&&A(j,"hidden",oe(e[0]))},i(e){M||(I(K,e),M=!0)},o(e){T(K,e),M=!1},d(e){e&&n(t),K&&K.d(e),e&&n(U),e&&n(L),e&&n(S),e&&n(j),q=!1,v(R)}}}function Be(e,t,a){let s;L(e,W,e=>a(0,s=e));let{$$slots:o={},$$scope:l}=t;return e.$$set=e=>{"$$scope"in e&&a(4,l=e.$$scope)},[s,()=>{s.pageProps.editingLayout&&K(Z({id:""})),K(le()),K(ne())},()=>K(re()),()=>K(ce()),l,o]}class Ne extends e{constructor(e){super(),t(this,e,Be,we,a,{})}}function Ue(e){let t;return{c(){t=d("Select a block to change its settings")},l(e){t=h(e,"Select a block to change its settings")},m(e,a){c(e,t,a)},p:i,i:i,o:i,d(e){e&&n(t)}}}function Le(e){let t,a,i,g,m,v,$,x="menu"===e[2](e[0]).type;t=new ye({});let B=x&&De(e);return{c(){k(t.$$.fragment),a=u(),i=s("h3"),g=d("Element Settings"),m=u(),B&&B.c(),v=b(),this.h()},l(e){E(t.$$.fragment,e),a=f(e),i=o(e,"H3",{class:!0});var s=l(i);g=h(s,"Element Settings"),s.forEach(n),m=f(e),B&&B.l(e),v=b(),this.h()},h(){r(i,"class","element-title svelte-1to17tn")},m(e,s){P(t,e,s),c(e,a,s),c(e,i,s),p(i,g),c(e,m,s),B&&B.m(e,s),c(e,v,s),$=!0},p(e,t){1&t&&(x="menu"===e[2](e[0]).type),x?B?(B.p(e,t),1&t&&I(B,1)):(B=De(e),B.c(),I(B,1),B.m(v.parentNode,v)):B&&(w(),T(B,1,1,()=>{B=null}),U())},i(e){$||(I(t.$$.fragment,e),I(B),$=!0)},o(e){T(t.$$.fragment,e),T(B),$=!1},d(e){y(t,e),e&&n(a),e&&n(i),e&&n(m),B&&B.d(e),e&&n(v)}}}function De(e){let t,a;return t=new ke({props:{elementId:e[1](e[0])}}),{c(){k(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,s){P(t,e,s),a=!0},p(e,a){const s={};1&a&&(s.elementId=e[1](e[0])),t.$set(s)},i(e){a||(I(t.$$.fragment,e),a=!0)},o(e){T(t.$$.fragment,e),a=!1},d(e){y(t,e)}}}function Se(e){let t,a,s,o,l;const r=[Le,Ue],i=[];function d(e,a){return 1&a&&(t=!!e[2](e[0])),t?0:1}return a=d(e,-1),s=i[a]=r[a](e),{c(){s.c(),o=b()},l(e){s.l(e),o=b()},m(e,t){i[a].m(e,t),c(e,o,t),l=!0},p(e,t){let l=a;a=d(e,t),a===l?i[a].p(e,t):(w(),T(i[l],1,1,()=>{i[l]=null}),U(),s=i[a],s||(s=i[a]=r[a](e),s.c()),I(s,1),s.m(o.parentNode,o))},i(e){l||(I(s),l=!0)},o(e){T(s),l=!1},d(e){i[a].d(e),e&&n(o)}}}function Oe(e){let t,a;return t=new Ne({props:{$$slots:{default:[Se]},$$scope:{ctx:e}}}),{c(){k(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,s){P(t,e,s),a=!0},p(e,[a]){const s={};9&a&&(s.$$scope={dirty:a,ctx:e}),t.$set(s)},i(e){a||(I(t.$$.fragment,e),a=!0)},o(e){T(t.$$.fragment,e),a=!1},d(e){y(t,e)}}}function Ae(e,t,a){let s;L(e,W,e=>a(0,s=e));const o=e=>{let t=(e.pageProps.focusedBlock||{}).id;if(e.blockProps[t])return(e.blockProps[t].elements||[void 0])[0]};return[s,o,e=>{let t=o(e);if(t)return e.elementProps[t]}]}class Ve extends e{constructor(e){super(),t(this,e,Ae,Oe,a,{})}}function je(e){let t,a,i,d,h,m,v,$,b;return d=new ie({}),m=new Ve({}),{c(){t=s("main"),a=s("div"),i=s("div"),k(d.$$.fragment),h=u(),k(m.$$.fragment),this.h()},l(e){t=o(e,"MAIN",{class:!0});var s=l(t);a=o(s,"DIV",{class:!0});var r=l(a);i=o(r,"DIV",{class:!0});var c=l(i);E(d.$$.fragment,c),c.forEach(n),r.forEach(n),h=f(s),E(m.$$.fragment,s),s.forEach(n),this.h()},h(){r(i,"class","block svelte-52p31m"),r(a,"class","page svelte-52p31m"),A(a,"makeWayForToolbar",oe(e[1])),r(t,"class","svelte-52p31m"),A(t,"hidden",e[0])},m(s,o){c(s,t,o),p(t,a),p(a,i),P(d,i,null),p(t,h),P(m,t,null),v=!0,$||(b=g(a,"click",e[5]),$=!0)},p(e,[s]){2&s&&A(a,"makeWayForToolbar",oe(e[1])),1&s&&A(t,"hidden",e[0])},i(e){v||(I(d.$$.fragment,e),I(m.$$.fragment,e),v=!0)},o(e){T(d.$$.fragment,e),T(m.$$.fragment,e),v=!1},d(e){e&&n(t),y(d),y(m),$=!1,b()}}}var He=function(e,t,a,s){return new(a||(a=Promise))((function(o,l){function n(e){try{c(s.next(e))}catch(e){l(e)}}function r(e){try{c(s.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,r)}c((s=s.apply(e,t||[])).next())}))};function Me(e,t){return He(this,void 0,void 0,(function*(){try{const a=e.params.pageId,s=q(a);if(!t.username)return void this.redirect(302,R(a));const o=yield this.fetch(s),l=yield o.json();return l?"true"===e.query.create?void this.redirect(302,z(a)):(W.set(l),{storePreloaded:l,pageId:a,create:!1}):"true"===e.query.create?{pageId:a,create:!0,storePreloaded:void 0}:void this.error(404,"Page not found")}catch(e){this.error(500,e)}}))}function qe(e,t,a){let s;L(e,W,e=>a(1,s=e));let{storePreloaded:o}=t,{pageId:l}=t,{create:n}=t,r=!0;o&&j(W,s=o,s);const c=()=>{F(l,s).then(()=>{console.log("saved"),K(de())}).catch(()=>console.log("save error:"))},i=()=>{c(),setInterval(()=>{s.saved||c()},5e3),window.onbeforeunload=()=>{s.saved||(alert("Page not saved, confirm to leave?"),c())}},d=()=>{C(l).then(e=>{e.data?(console.log("Page already exist, redirecting"),window.location.assign(window.location.href.replace("?create=true",""))):i()}).catch(e=>{console.log("get Page error retrying in 5s",e),setTimeout(d,5e3)})};H(()=>{n?d():i(),a(0,r=!1)});return e.$$set=e=>{"storePreloaded"in e&&a(2,o=e.storePreloaded),"pageId"in e&&a(3,l=e.pageId),"create"in e&&a(4,n=e.create)},[r,s,o,l,n,()=>K(Z({id:""}))]}export default class extends e{constructor(e){super(),t(this,e,qe,je,a,{storePreloaded:2,pageId:3,create:4})}}export{Me as preload};
