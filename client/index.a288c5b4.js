import{S as e,i as r,s as t,e as a,c as s,a as n,d as l,b as c,f as o,n as u,t as h,g as i,h as f,j as p,k as d,l as m,m as g,o as v,p as $,q as E,r as I,u as w,v as y,w as A,x as L,y as j}from"./client.65f83058.js";import{l as P,L as x,P as N}from"./index.02369f4d.js";import{v as b}from"./v4.96b22442.js";function S(e){let r,t,m,g,v,$,E,I;return{c(){r=a("a"),t=h("Register"),m=i(),g=a("span"),v=h("|"),$=i(),E=a("a"),I=h("Login"),this.h()},l(e){r=s(e,"A",{href:!0});var a=n(r);t=f(a,"Register"),a.forEach(l),m=p(e),g=s(e,"SPAN",{});var c=n(g);v=f(c,"|"),c.forEach(l),$=p(e),E=s(e,"A",{href:!0});var o=n(E);I=f(o,"Login"),o.forEach(l),this.h()},h(){c(r,"href","/auth/register"),c(E,"href","/auth/login")},m(e,a){o(e,r,a),d(r,t),o(e,m,a),o(e,g,a),d(g,v),o(e,$,a),o(e,E,a),d(E,I)},p:u,d(e){e&&l(r),e&&l(m),e&&l(g),e&&l($),e&&l(E)}}}function k(e){let r,t,u,v,$,E,I,w,y,A;return{c(){r=a("span"),t=h(e[0]),u=i(),v=a("span"),$=h("|"),E=i(),I=a("span"),w=h("Logout"),this.h()},l(a){r=s(a,"SPAN",{class:!0});var c=n(r);t=f(c,e[0]),c.forEach(l),u=p(a),v=s(a,"SPAN",{});var o=n(v);$=f(o,"|"),o.forEach(l),E=p(a),I=s(a,"SPAN",{class:!0});var h=n(I);w=f(h,"Logout"),h.forEach(l),this.h()},h(){c(r,"class","username"),c(I,"class","logout svelte-4wajjh")},m(a,s){o(a,r,s),d(r,t),o(a,u,s),o(a,v,s),d(v,$),o(a,E,s),o(a,I,s),d(I,w),y||(A=m(I,"click",e[1]),y=!0)},p(e,r){1&r&&g(t,e[0])},d(e){e&&l(r),e&&l(u),e&&l(v),e&&l(E),e&&l(I),y=!1,A()}}}function M(e){let r;function t(e,r){return e[0]?k:S}let h=t(e),i=h(e);return{c(){r=a("div"),i.c(),this.h()},l(e){r=s(e,"DIV",{class:!0});var t=n(r);i.l(t),t.forEach(l),this.h()},h(){c(r,"class","user-menu svelte-4wajjh")},m(e,t){o(e,r,t),i.m(r,null)},p(e,[a]){h===(h=t(e))&&i?i.p(e,a):(i.d(1),i=h(e),i&&(i.c(),i.m(r,null)))},i:u,o:u,d(e){e&&l(r),i.d()}}}function R(e,r,t){let{username:a}=r;return e.$$set=e=>{"username"in e&&t(0,a=e.username)},[a,()=>{P().then(()=>window.location.reload()).catch(e=>console.log("Logout error"))}]}class _ extends e{constructor(e){super(),r(this,e,R,M,t,{username:0})}}function U(e,r,t){const a=e.slice();return a[7]=r[t],a}function q(e){let r,t,u;return{c(){r=a("a"),t=h("create"),this.h()},l(e){r=s(e,"A",{href:!0});var a=n(r);t=f(a,"create"),a.forEach(l),this.h()},h(){c(r,"href",u=e[3](e[2]))},m(e,a){o(e,r,a),d(r,t)},p(e,t){4&t&&u!==(u=e[3](e[2]))&&c(r,"href",u)},d(e){e&&l(r)}}}function B(e,r){let t,u,m,v,$,E=`${r[7].pageId.replace(O,"").replace("_"," ")} ${r[7].published?"":"(draft)"}`;return{key:e,first:null,c(){t=a("li"),u=a("a"),m=h(E),$=i(),this.h()},l(e){t=s(e,"LI",{});var r=n(t);u=s(r,"A",{href:!0});var a=n(u);m=f(a,E),a.forEach(l),$=p(r),r.forEach(l),this.h()},h(){c(u,"href",v="/"+r[7].pageId),this.first=t},m(e,r){o(e,t,r),d(t,u),d(u,m),d(t,$)},p(e,r){1&r&&E!==(E=`${e[7].pageId.replace(O,"").replace("_"," ")} ${e[7].published?"":"(draft)"}`)&&g(m,E),1&r&&v!==(v="/"+e[7].pageId)&&c(u,"href",v)},d(e){e&&l(t)}}}function D(e){let r,t,u,P,x,N,b,S,k,M,R,D,F,H,O,T,V,z=e[1]+"'s Pages",C=[],G=new Map;x=new _({props:{username:e[1]}});let J=e[2]&&q(e),K=e[0]||[];const Q=e=>e[7].pageId;for(let r=0;r<K.length;r+=1){let t=U(e,K,r),a=Q(t);G.set(a,C[r]=B(a,t))}return{c(){r=a("main"),t=a("h1"),u=h(z),P=i(),v(x.$$.fragment),N=i(),b=a("form"),S=a("label"),k=h("Enter a page title"),M=i(),R=a("input"),D=i(),J&&J.c(),F=i(),H=a("ul");for(let e=0;e<C.length;e+=1)C[e].c();this.h()},l(e){r=s(e,"MAIN",{class:!0});var a=n(r);t=s(a,"H1",{class:!0});var c=n(t);u=f(c,z),c.forEach(l),P=p(a),$(x.$$.fragment,a),N=p(a),b=s(a,"FORM",{});var o=n(b);S=s(o,"LABEL",{for:!0});var h=n(S);k=f(h,"Enter a page title"),h.forEach(l),M=p(o),R=s(o,"INPUT",{id:!0}),D=p(o),J&&J.l(o),o.forEach(l),F=p(a),H=s(a,"UL",{});var i=n(H);for(let e=0;e<C.length;e+=1)C[e].l(i);i.forEach(l),a.forEach(l),this.h()},h(){c(t,"class","page-title svelte-1whrfpy"),c(S,"for","page-name-input"),c(R,"id","page-name-input"),c(r,"class","svelte-1whrfpy")},m(a,s){o(a,r,s),d(r,t),d(t,u),d(r,P),E(x,r,null),d(r,N),d(r,b),d(b,S),d(S,k),d(b,M),d(b,R),I(R,e[2]),d(b,D),J&&J.m(b,null),d(r,F),d(r,H);for(let e=0;e<C.length;e+=1)C[e].m(H,null);O=!0,T||(V=m(R,"input",e[5]),T=!0)},p(e,[r]){(!O||2&r)&&z!==(z=e[1]+"'s Pages")&&g(u,z);const t={};if(2&r&&(t.username=e[1]),x.$set(t),4&r&&R.value!==e[2]&&I(R,e[2]),e[2]?J?J.p(e,r):(J=q(e),J.c(),J.m(b,null)):J&&(J.d(1),J=null),1&r){const t=e[0]||[];C=w(C,r,Q,1,e,t,G,H,j,B,null,U)}},i(e){O||(y(x.$$.fragment,e),O=!0)},o(e){A(x.$$.fragment,e),O=!1},d(e){e&&l(r),L(x),J&&J.d();for(let e=0;e<C.length;e+=1)C[e].d();T=!1,V()}}}var F=function(e,r,t,a){return new(t||(t=Promise))((function(s,n){function l(e){try{o(a.next(e))}catch(e){n(e)}}function c(e){try{o(a.throw(e))}catch(e){n(e)}}function o(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(l,c)}o((a=a.apply(e,r||[])).next())}))};function H(e,r){return F(this,void 0,void 0,(function*(){try{r.userId||this.redirect(302,x);let e=N;const t=yield this.fetch(e);return{pages:yield t.json(),userId:r.userId,username:r.username}}catch(e){this.error(500,e)}}))}let O=/(-[\w]+)+$/g;function T(e,r,t){let a,{pages:s}=r,{userId:n}=r,{username:l}=r,c=b();return e.$$set=e=>{"pages"in e&&t(0,s=e.pages),"userId"in e&&t(4,n=e.userId),"username"in e&&t(1,l=e.username)},[s,l,a,e=>`/${e.replace(" ","_")}-${c}/edit/?create=true`,n,function(){a=this.value,t(2,a)}]}export default class extends e{constructor(e){super(),r(this,e,T,D,t,{pages:0,userId:4,username:1})}}export{H as preload};
